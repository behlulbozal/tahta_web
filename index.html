<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tahta</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header>
            <h1>Tahta</h1>
            <div id="status">
                <span id="status-dot"></span>
                <span id="status-text">Baglaniyor</span>
            </div>
        </header>

        <!-- Error State -->
        <div id="error-view" class="view hidden">
            <div class="empty-state">
                <div class="empty-icon">!</div>
                <p id="error-text">Baglanti hatasi</p>
                <button id="btn-retry" class="btn-secondary">Tekrar Dene</button>
            </div>
        </div>

        <!-- Main Actions -->
        <div id="main-view" class="view hidden">
            <p class="hint">Tahtaya gondermek icin secin</p>

            <div class="action-grid">
                <button id="btn-camera" class="action-card">
                    <div class="action-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                            <circle cx="12" cy="13" r="3"/>
                        </svg>
                    </div>
                    <span>Fotograf Cek</span>
                </button>

                <button id="btn-gallery" class="action-card">
                    <div class="action-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <path d="M21 15l-5-5L5 21"/>
                        </svg>
                    </div>
                    <span>Galeri</span>
                </button>

                <button id="btn-audio" class="action-card">
                    <div class="action-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"/>
                            <path d="M19 10v2a7 7 0 01-14 0v-2"/>
                            <line x1="12" y1="19" x2="12" y2="23"/>
                            <line x1="8" y1="23" x2="16" y2="23"/>
                        </svg>
                    </div>
                    <span>Ses Kaydet</span>
                </button>
            </div>
        </div>

        <!-- Camera View -->
        <div id="camera-view" class="view hidden">
            <div class="camera-container">
                <video id="camera-preview" autoplay playsinline></video>
                <button id="btn-switch-camera" class="btn-icon camera-switch">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                    </svg>
                </button>
            </div>
            <div class="camera-actions">
                <button id="btn-cancel-camera" class="btn-secondary">Iptal</button>
                <button id="btn-capture" class="btn-primary btn-capture">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <circle cx="12" cy="12" r="10"/>
                    </svg>
                </button>
                <div class="spacer"></div>
            </div>
        </div>

        <!-- Photo Preview -->
        <div id="photo-view" class="view hidden">
            <div class="photo-container">
                <img id="photo-preview" alt="Fotograf">
            </div>
            <div class="action-buttons">
                <button id="btn-retake" class="btn-secondary">Tekrar Cek</button>
                <button id="btn-send-photo" class="btn-primary">Gonder</button>
            </div>
        </div>

        <!-- Audio Recording -->
        <div id="audio-view" class="view hidden">
            <div class="audio-container">
                <div id="audio-timer">0:00</div>
                <div id="audio-indicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <p class="audio-hint">Kayit yapiliyor...</p>
            </div>
            <div class="action-buttons">
                <button id="btn-cancel-audio" class="btn-secondary">Iptal</button>
                <button id="btn-stop-audio" class="btn-primary">Gonder</button>
            </div>
        </div>

        <!-- Progress -->
        <div id="progress-view" class="view hidden">
            <div class="progress-container">
                <div class="progress-bar">
                    <div id="progress-fill"></div>
                </div>
                <p id="progress-text">Gonderiliyor...</p>
            </div>
        </div>

        <!-- Success -->
        <div id="success-view" class="view hidden">
            <div class="empty-state">
                <div class="success-icon">âœ“</div>
                <p>Gonderildi</p>
            </div>
        </div>

        <!-- Hidden file input -->
        <input type="file" id="file-input" accept="image/*" class="hidden">
    </div>

    <script type="module" src="js/firebase.js"></script>
    <script type="module" src="js/webrtc.js"></script>
    <script type="module" src="js/main.js"></script>
</body>
</html>
